{% extends 'base.html' %}
{% block title %}Chick Pay - ì…ê¸ˆ ì™„ë£Œ{% endblock %}
{% block content %}

{% load humanize %}
<main class="container mx-auto px-4 py-10 flex-grow">
    <div class="max-w-4xl mx-auto">
        <div class="flex items-center mb-8">
            <a href="{% url 'cash-deposit' %}" class="text-chick-brown hover:underline flex items-center">
                <span class="mr-2">â†</span> ì…ê¸ˆ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
            </a>
        </div>
        <div class="bg-white rounded-3xl p-8 shadow-lg mb-8">
            <h2 class="text-2xl font-bold text-chick-brown mb-6 flex items-center">
                <span class="text-3xl mr-3">ğŸ’°</span> ì…ê¸ˆ ìƒì„¸ ì •ë³´
            </h2>

            <div
                class="bg-gradient-to-r from-chick-yellow to-chick-orange rounded-2xl p-6 text-chick-brown shadow-md mb-8">
                <div class="flex justify-between items-center mb-4">
                    <span class="font-bold text-xl">Cash</span>
                    <span class="text-3xl">ğŸ¦</span>
                </div>
                <div class="text-2xl font-bold mb-2">{{email}}</div>
                <div class="flex justify-between items-center">
                    <span class="text-lg">{{ name }}</span>
                    <span class="font-bold text-3xl">â‚© {{ balance|floatformat:"0"|intcomma }}</span>
                </div>
            </div> 

            <div class="mb-8">
                <h3 class="text-xl font-bold text-chick-brown mb-4">ì…ê¸ˆ ë‚´ì—­</h3>

                <div class="bg-chick-light rounded-xl p-6 mb-6">
                    <div class="flex justify-between items-center mb-3">
                        <span class="font-bold">ì…ê¸ˆ ê¸ˆì•¡</span>
                        <span class="text-2xl font-bold text-chick-brown">                      
                        {% if recent_deposits.0 %}
                            â‚© {{recent_deposits.0.amount|floatformat:"0"|intcomma }}
                          {% else %}
                            â‚© 0
                          {% endif %}
                        </span>
                    </div>
                    <div class="flex justify-between items-center mb-3">
                        <!-- <span>ì…ê¸ˆ ë°©ë²•</span> -->
                    </div>
                    <div class="flex justify-between items-center mb-3">
                        <span>ì…ê¸ˆ ì¼ì‹œ</span>
                        <span>    {% if recent_deposits %}
                            {{ recent_deposits.0.created_at|date:"Yë…„ nì›” jì¼ H:i" }}
                          {% else %}
                            ë‚´ì—­ ì—†ìŒ
                          {% endif %}</span>
                    </div>
                    <div class="flex justify-between items-center mb-3">
                        <span>ê±°ë˜ ID</span>
                        <span class="text-gray-500 text-sm">DP2025040154321</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>ìƒíƒœ</span>
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">ì™„ë£Œ</span>
                    </div>
                </div>

            <div class="border-t border-gray-200 pt-6">
                <h3 class="text-xl font-bold text-chick-brown mb-4">ì…ê¸ˆ í›„ ì”ì•¡</h3>
                <div class="flex justify-between items-center">
                    <span>ì´ì „ ì”ì•¡</span>
                    <span>â‚©  {{previous_balance|floatformat:"0"|intcomma}} </span>
                </div>
                <div class="flex justify-between items-center mb-2">
                    <span>ì…ê¸ˆ ê¸ˆì•¡</span>
                    <span class="text-green-500">+ â‚© {{recent_deposits.0.amount|floatformat:"0"|intcomma }}</span>
                </div>
                <div class="flex justify-between items-center font-bold text-lg">
                    <span>í˜„ì¬ ì”ì•¡</span>
                    <span class="text-chick-brown">â‚© {{ balance|floatformat:"0"|intcomma }}</span>
                </div>
            </div>
        </div>






        <!-- <h3 class="">ìµœê·¼ ì…ê¸ˆ ë‚´ì—­</h3>
        {% for tx in recent_deposits %}
        <div class="">
            <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4 shadow">
              <p class="text-sm text-gray-700 font-semibold">ì…ê¸ˆ ê¸ˆì•¡</p>
              <p class="text-xl font-bold text-chick-brown">
                â‚© {{ tx.amount|floatformat:"0" }}
              </p>
              <p class="text-sm text-gray-500 mt-2">
                {{ tx.created_at|date:"Yë…„ nì›” jì¼ H:i" }}
              </p>
              {% if tx.memo %}
                <p class="text-sm text-gray-600 mt-1">ë©”ëª¨: {{ tx.memo }}</p>
              {% endif %}
            </div>
          {% empty %}
            <p class="text-gray-400">ì…ê¸ˆ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
          {% endfor %}
        </div> -->

        <div class="bg-white rounded-3xl p-8 shadow-lg">
            <h3 class="text-xl font-bold text-chick-brown mb-6">ìµœê·¼ ì…ê¸ˆ ë‚´ì—­</h3>
        
            <div class="space-y-4">
                {% for tx in recent_deposits %}
                    <div class="flex justify-between items-center p-4 {% if not forloop.last %}border-b border-gray-100{% endif %}">
                        <div>
                            <div class="font-medium">
                                {% if tx.bank_name %}
                                    {{ tx.bank_name }}
                                {% else %}
                                    ì…ê¸ˆ
                                {% endif %}
                            </div>
                            <div class="text-sm text-gray-500">
                                {{ tx.created_at|date:"Yë…„ nì›” jì¼ H:i" }}
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-green-500">+ â‚© {{ tx.amount|floatformat:"0"|intcomma }}</div>
                            <div class="text-sm text-gray-500">
                                {% if tx.transaction_method %}
                                    {{ tx.transaction_method }}
                                {% else %}
                                    ê³„ì¢Œ ì´ì²´
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <div class="text-center text-gray-500 py-4">
                        ì…ê¸ˆ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.
                    </div>
                {% endfor %}
            </div>
        
            <div class="mt-6 text-center">
                <a href="{}" class="text-chick-brown hover:underline text-sm">ëª¨ë“  ì…ê¸ˆ ë‚´ì—­ ë³´ê¸°</a>
            </div>
        </div>
    </div>
</main>
{% endblock %}